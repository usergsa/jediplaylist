<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>My Play List</title>
</head>
<body>
<div class="interface">
    <div class="video" id="player"></div>
    <div class="menu">
     <button onclick="abrirNovaAba()">Abrir Link em Nova Aba</button>
     <h1 id="tt">Timer</h1> 
  </div>
  </div>
    <script>
      var id=0;
      // 2. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '360',
          width: '640',
          videoId: 'triXo_xCqms',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }

      // 4. The API will call this function when the video player is ready.
      function onPlayerReady(event) {
        event.target.playVideo();
      }
      // 5. The API calls this function when the player's state changes.
      //    The function indicates that when playing a video (state=1),
      //    the player should play for six seconds and then stop.
      var done = false;
      function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING && !done) {
          setTimeout(stopVideo, 60000);
          done = true;
        }
      console.log(event.data+" "+id);
      if(event.data>1){
          clearInterval(id);id=0;
          t++;
        }
      if(id==0 && event.data==1){
          id =setInterval(tmr, 1000);
        }
      if(event.data<1){
        clearInterval(id);id=0;
      }   
      }
      
      function stopVideo() {
        player.stopVideo();
      }
     

function abrirNovaAba() {
  //document.title = t;
  var novaAba = window.open('https://www.google.com');
}

var t=60;
function tmr(){
  t--;
  document.title = t;
  const titulo = document.getElementById('tt');
  titulo.innerText = t;
}

</script> 
</body>
  
<style>
  .interface{
    width: 100vw;
    height: 100vh;
    font-size: 200%;
    display: flex;
    box-sizing: border-box;
}
.video {
    background-color: black;
    color: white;
    border: solid 5px blueviolet;
    width: 80%;
    height: 100%;
    box-sizing: border-box;
}

.menu{
    background-color: black;
    color: white;
    border: solid 5px blueviolet;
    width: 20%;
    height: 100%;
    box-sizing: border-box;
}
  
body{
    margin: 0;
}
</style>
</html>


